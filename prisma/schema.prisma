generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Project {
  id           Int       @id @default(autoincrement())
  pj_id        String    @unique @db.VarChar(7)
  pj_name      String    @db.VarChar(255)
  pj_member_id Int
  company      String    @db.VarChar(255)
  created_by   String?   @db.VarChar(45)
  created_at   DateTime  @default(now()) @db.Timestamp(6)
  updated_by   String?   @db.VarChar(45)
  updated_at   DateTime  @updatedAt @db.Timestamp(6)
  deleted_by   String?   @db.VarChar(45)
  deleted_at   DateTime? @db.Timestamp(6)
  pj_member    PjMember  @relation(fields: [pj_member_id], references: [id])
  user         user[]

  @@index([deleted_at], map: "project_deleted_at_idx")
  @@index([pj_member_id], map: "projects_pj_member_id_fkey")
  @@map("projects")
}

model PjMember {
  id          Int       @id @default(autoincrement())
  member_id   String    @unique @db.VarChar(7)
  member_type String    @db.VarChar(45)
  created_by  String?   @db.VarChar(45)
  created_at  DateTime  @default(now()) @db.Timestamp(6)
  updated_by  String?   @db.VarChar(45)
  updated_at  DateTime  @updatedAt @db.Timestamp(6)
  deleted_by  String?   @db.VarChar(45)
  deleted_at  DateTime? @db.Timestamp(6)
  projects    Project[]
  user        user[]

  @@index([deleted_at], map: "pj_member_deleted_at_idx")
  @@map("pj_members")
}

model Role {
  id          Int       @id @default(autoincrement())
  name        String    @unique @db.VarChar(45)
  description String?   @db.VarChar(255)
  created_at  DateTime  @default(now()) @db.Timestamp(6)
  updated_at  DateTime  @updatedAt @db.Timestamp(6)
  deleted_at  DateTime? @db.Timestamp(6)
  user        user[]

  @@index([deleted_at], map: "deleted_at_index")
  @@map("roles")
}

model UserGroup {
  id          Int       @id @default(autoincrement())
  groupId     String    @unique @db.VarChar(7)
  name        String    @db.VarChar(255)
  systemType  String?   @map("system_type") @db.VarChar(25)
  description String?   @db.VarChar(255)
  permission  Json?
  createdBy   String?   @map("created_by") @db.VarChar(255)
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedBy   String?   @map("updated_by") @db.VarChar(255)
  updatedAt   DateTime  @updatedAt @map("updated_at") @db.Timestamp(6)
  deletedBy   String?   @map("deleted_by") @db.VarChar(255)
  deletedAt   DateTime? @map("deleted_at") @db.Timestamp(6)
  user        user[]

  @@index([deletedAt], map: "user_group_deleted_at_idx")
  @@index([systemType], map: "user_group_system_type_idx")
  @@map("user_groups")
}

model user {
  id            Int        @id @default(autoincrement())
  user_id       String     @unique(map: "User_user_id_key") @db.VarChar(7)
  role_id       Int
  name          String     @db.VarChar(255)
  email         String     @unique(map: "User_email_key") @db.VarChar(255)
  phone         String?    @db.VarChar(16)
  password      String     @db.VarChar(255)
  pj_member_id  Int
  user_group_id String?
  department    String?    @db.VarChar(45)
  project_id    Int?
  created_by    String?    @db.VarChar(255)
  created_at    DateTime   @default(now()) @db.Timestamp(6)
  updated_at    DateTime   @default(now()) @db.Timestamp(6)
  pj_members    PjMember   @relation(fields: [pj_member_id], references: [id], map: "User_pj_member_id_fkey")
  projects      Project?   @relation(fields: [project_id], references: [id], map: "User_project_id_fkey")
  roles         Role       @relation(fields: [role_id], references: [id], map: "User_role_id_fkey")
  user_groups   UserGroup? @relation(fields: [user_group_id], references: [groupId], map: "User_user_group_id_fkey")

  @@index([pj_member_id], map: "User_pj_member_id_fkey")
  @@index([project_id], map: "User_project_id_fkey")
  @@index([role_id], map: "User_role_id_fkey")
  @@index([user_group_id], map: "User_user_group_id_fkey")
  @@index([email], map: "email_index")
  @@index([user_id], map: "user_id_index")
}
